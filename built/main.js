import { Parser } from "./model/parser.js";
import { MxNodeRender } from "./mxNodeRender.js";
import { Render } from "./view/render.js";
import { Quill } from "./view/painter.js";
import { Utils } from "./utils.js";
import { Constant } from "./view/constant.js";
import { Config } from "./config.js";
var xml = "\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE score-partwise PUBLIC '-//Recordare//DTD MusicXML 2.0 Partwise//EN' 'http://www.musicxml.org/dtds/2.0/partwise.dtd'>\n<score-partwise version=\"2.0\">\n    <identification>\n        <encoding>\n            <encoding-date>2019-10-17</encoding-date>\n            <software>Guitar Pro 7.5.0</software>\n        </encoding>\n    </identification>\n    <defaults>\n        <scaling>\n            <millimeters>6.4</millimeters>\n            <tenths>40</tenths>\n        </scaling>\n        <page-layout>\n            <page-height>1850</page-height>\n            <page-width>1310</page-width>\n        </page-layout>\n    </defaults>\n    <part-list>\n        <score-part id=\"P1\">\n            <part-name>Acoustic Piano</part-name>\n            <part-abbreviation>pno.</part-abbreviation>\n            <midi-instrument id=\"P1\">\n                <midi-channel>1</midi-channel>\n                <midi-bank>1</midi-bank>\n                <midi-program>1</midi-program>\n                <volume>80</volume>\n                <pan>0</pan>\n            </midi-instrument>\n        </score-part>\n    </part-list>\n    <part id=\"P1\">\n        <measure number=\"1\">\n            <attributes>\n                <divisions>4</divisions>\n                <key>\n                    <fifths>1</fifths>\n                    <mode>major</mode>\n                </key>\n                <time>\n                    <beats>4</beats>\n                    <beat-type>4</beat-type>\n                </time>\n                <staves>4</staves>\n                <clef number=\"1\">\n                    <sign>G</sign>\n                    <line>2</line>\n                </clef>\n                <clef number=\"2\">\n                    <sign>TAB</sign>\n                    <line>5</line>\n                </clef>\n                <clef number=\"3\">\n                    <sign>F</sign>\n                    <line>4</line>\n                </clef>\n                <clef number=\"4\">\n                    <sign>TAB</sign>\n                    <line>5</line>\n                </clef>\n                <staff-details number=\"1\">\n                    <staff-tuning line=\"1\">\n                        <tuning-step>E</tuning-step>\n                        <tuning-octave>2</tuning-octave>\n                    </staff-tuning>\n                    <staff-tuning line=\"2\">\n                        <tuning-step>A</tuning-step>\n                        <tuning-octave>2</tuning-octave>\n                    </staff-tuning>\n                    <staff-tuning line=\"3\">\n                        <tuning-step>D</tuning-step>\n                        <tuning-octave>3</tuning-octave>\n                    </staff-tuning>\n                    <staff-tuning line=\"4\">\n                        <tuning-step>G</tuning-step>\n                        <tuning-octave>3</tuning-octave>\n                    </staff-tuning>\n                    <staff-tuning line=\"5\">\n                        <tuning-step>B</tuning-step>\n                        <tuning-octave>3</tuning-octave>\n                    </staff-tuning>\n                    <staff-tuning line=\"6\">\n                        <tuning-step>E</tuning-step>\n                        <tuning-octave>4</tuning-octave>\n                    </staff-tuning>\n                </staff-details>\n                <staff-details number=\"2\">\n                    <staff-lines>6</staff-lines>\n                    <staff-tuning line=\"1\">\n                        <tuning-step>E</tuning-step>\n                        <tuning-octave>2</tuning-octave>\n                    </staff-tuning>\n                    <staff-tuning line=\"2\">\n                        <tuning-step>A</tuning-step>\n                        <tuning-octave>2</tuning-octave>\n                    </staff-tuning>\n                    <staff-tuning line=\"3\">\n                        <tuning-step>D</tuning-step>\n                        <tuning-octave>3</tuning-octave>\n                    </staff-tuning>\n                    <staff-tuning line=\"4\">\n                        <tuning-step>G</tuning-step>\n                        <tuning-octave>3</tuning-octave>\n                    </staff-tuning>\n                    <staff-tuning line=\"5\">\n                        <tuning-step>B</tuning-step>\n                        <tuning-octave>3</tuning-octave>\n                    </staff-tuning>\n                    <staff-tuning line=\"6\">\n                        <tuning-step>E</tuning-step>\n                        <tuning-octave>4</tuning-octave>\n                    </staff-tuning>\n                </staff-details>\n                <staff-details number=\"3\">\n                    <staff-tuning line=\"1\">\n                        <tuning-step>B</tuning-step>\n                        <tuning-octave>0</tuning-octave>\n                    </staff-tuning>\n                    <staff-tuning line=\"2\">\n                        <tuning-step>E</tuning-step>\n                        <tuning-octave>1</tuning-octave>\n                    </staff-tuning>\n                    <staff-tuning line=\"3\">\n                        <tuning-step>A</tuning-step>\n                        <tuning-octave>1</tuning-octave>\n                    </staff-tuning>\n                    <staff-tuning line=\"4\">\n                        <tuning-step>D</tuning-step>\n                        <tuning-octave>2</tuning-octave>\n                    </staff-tuning>\n                    <staff-tuning line=\"5\">\n                        <tuning-step>G</tuning-step>\n                        <tuning-octave>2</tuning-octave>\n                    </staff-tuning>\n                </staff-details>\n                <staff-details number=\"4\">\n                    <staff-lines>5</staff-lines>\n                    <staff-tuning line=\"1\">\n                        <tuning-step>B</tuning-step>\n                        <tuning-octave>0</tuning-octave>\n                    </staff-tuning>\n                    <staff-tuning line=\"2\">\n                        <tuning-step>E</tuning-step>\n                        <tuning-octave>1</tuning-octave>\n                    </staff-tuning>\n                    <staff-tuning line=\"3\">\n                        <tuning-step>A</tuning-step>\n                        <tuning-octave>1</tuning-octave>\n                    </staff-tuning>\n                    <staff-tuning line=\"4\">\n                        <tuning-step>D</tuning-step>\n                        <tuning-octave>2</tuning-octave>\n                    </staff-tuning>\n                    <staff-tuning line=\"5\">\n                        <tuning-step>G</tuning-step>\n                        <tuning-octave>2</tuning-octave>\n                    </staff-tuning>\n                </staff-details>\n            </attributes>\n            <direction directive=\"yes\">\n                <direction-type>\n                    <metronome parentheses=\"yes\" default-y=\"40\">\n                        <beat-unit>quarter</beat-unit>\n                        <per-minute>120</per-minute>\n                    </metronome>\n                </direction-type>\n                <sound tempo=\"120\" />\n            </direction>\n            <note>\n                <pitch>\n                    <step>F</step>\n                    <octave>4</octave>\n                </pitch>\n                <duration>2</duration>\n                <voice>1</voice>\n                <type>eighth</type>\n                <accidental>natural</accidental>\n                <stem>up</stem>\n                <notehead>normal</notehead>\n                <staff>1</staff>\n                <beam number=\"1\">begin</beam>\n                <notations>\n                    <dynamics>\n                        <mf />\n                    </dynamics>\n                    <technical>\n                        <string>1</string>\n                        <fret>1</fret>\n                    </technical>\n                </notations>\n            </note>\n            <note>\n                <pitch>\n                    <step>B</step>\n                    <octave>4</octave>\n                </pitch>\n                <duration>2</duration>\n                <voice>1</voice>\n                <type>eighth</type>\n                <stem>up</stem>\n                <notehead>normal</notehead>\n                <staff>1</staff>\n                <beam number=\"1\">end</beam>\n                <notations>\n                    <dynamics>\n                        <p />\n                    </dynamics>\n                    <technical>\n                        <string>2</string>\n                        <fret>12</fret>\n                    </technical>\n                </notations>\n            </note>\n            <note>\n                <chord />\n                <pitch>\n                    <step>F</step>\n                    <octave>4</octave>\n                </pitch>\n                <duration>2</duration>\n                <voice>1</voice>\n                <type>eighth</type>\n                <stem>up</stem>\n                <notehead>normal</notehead>\n                <staff>1</staff>\n                <beam number=\"1\">end</beam>\n                <notations>\n                    <dynamics>\n                        <p />\n                    </dynamics>\n                    <technical>\n                        <string>3</string>\n                        <fret>10</fret>\n                    </technical>\n                </notations>\n            </note>\n            <note>\n                <pitch>\n                    <step>G</step>\n                    <octave>4</octave>\n                </pitch>\n                <duration>1</duration>\n                <voice>1</voice>\n                <type>16th</type>\n                <stem>up</stem>\n                <notehead>normal</notehead>\n                <staff>1</staff>\n                <beam number=\"1\">begin</beam>\n                <notations>\n                    <dynamics>\n                        <mf />\n                    </dynamics>\n                    <technical>\n                        <string>5</string>\n                        <fret>22</fret>\n                    </technical>\n                </notations>\n            </note>\n            <note>\n                <pitch>\n                    <step>A</step>\n                    <octave>4</octave>\n                </pitch>\n                <duration>2</duration>\n                <voice>1</voice>\n                <type>eighth</type>\n                <stem>up</stem>\n                <notehead>normal</notehead>\n                <staff>1</staff>\n                <beam number=\"1\">continue</beam>\n                <notations>\n                    <dynamics>\n                        <mf />\n                    </dynamics>\n                    <technical>\n                        <string>4</string>\n                        <fret>19</fret>\n                    </technical>\n                </notations>\n            </note>\n            <note>\n                <pitch>\n                    <step>B</step>\n                    <octave>4</octave>\n                </pitch>\n                <duration>1</duration>\n                <voice>1</voice>\n                <type>16th</type>\n                <stem>up</stem>\n                <notehead>normal</notehead>\n                <staff>1</staff>\n                <beam number=\"1\">end</beam>\n                <notations>\n                    <dynamics>\n                        <mf />\n                    </dynamics>\n                    <technical>\n                        <string>3</string>\n                        <fret>16</fret>\n                    </technical>\n                </notations>\n            </note>\n            <note>\n                <pitch>\n                    <step>E</step>\n                    <octave>5</octave>\n                </pitch>\n                <duration>4</duration>\n                <voice>1</voice>\n                <type>quarter</type>\n                <stem>down</stem>\n                <notehead>normal</notehead>\n                <staff>1</staff>\n                <notations>\n                    <dynamics>\n                        <mf />\n                    </dynamics>\n                    <technical>\n                        <string>5</string>\n                        <fret>31</fret>\n                    </technical>\n                </notations>\n            </note>\n            <direction>\n                <direction-type>\n                    <wedge type=\"diminuendo\" />\n                </direction-type>\n            </direction>\n            <direction>\n                <direction-type>\n                    <octave-shift size=\"8\" type=\"down\" />\n                </direction-type>\n            </direction>\n            <note>\n                <pitch>\n                    <step>A</step>\n                    <octave>4</octave>\n                </pitch>\n                <duration>2</duration>\n                <voice>1</voice>\n                <type>eighth</type>\n                <stem>up</stem>\n                <notehead>normal</notehead>\n                <staff>1</staff>\n                <beam number=\"1\">begin</beam>\n                <notations>\n                    <dynamics>\n                        <mf />\n                    </dynamics>\n                    <technical>\n                        <string>3</string>\n                        <fret>14</fret>\n                    </technical>\n                </notations>\n            </note>\n            <direction>\n                <direction-type>\n                    <wedge type=\"diminuendo\" />\n                </direction-type>\n            </direction>\n            <direction>\n                <direction-type>\n                    <octave-shift size=\"8\" type=\"down\" />\n                </direction-type>\n            </direction>\n            <note>\n                <chord />\n                <pitch>\n                    <step>G</step>\n                    <octave>4</octave>\n                </pitch>\n                <duration>2</duration>\n                <voice>1</voice>\n                <type>eighth</type>\n                <stem>up</stem>\n                <notehead>normal</notehead>\n                <staff>1</staff>\n                <beam number=\"1\">begin</beam>\n                <notations>\n                    <dynamics>\n                        <mf />\n                    </dynamics>\n                    <technical>\n                        <string>1</string>\n                        <fret>3</fret>\n                    </technical>\n                </notations>\n            </note>\n            <direction>\n                <direction-type>\n                    <wedge type=\"stop\" />\n                </direction-type>\n            </direction>\n            <direction>\n                <direction-type>\n                    <octave-shift type=\"stop\" />\n                </direction-type>\n            </direction>\n            <note>\n                <pitch>\n                    <step>C</step>\n                    <octave>5</octave>\n                </pitch>\n                <duration>2</duration>\n                <tie type=\"start\" />\n                <voice>1</voice>\n                <type>eighth</type>\n                <stem>up</stem>\n                <notehead>normal</notehead>\n                <staff>1</staff>\n                <beam number=\"1\">end</beam>\n                <notations>\n                    <dynamics>\n                        <mf />\n                    </dynamics>\n                    <technical>\n                        <string>5</string>\n                        <fret>27</fret>\n                    </technical>\n                    <tied type=\"start\" />\n                </notations>\n            </note>\n            <backup>\n                <duration>20</duration>\n            </backup>\n            <note>\n                <pitch>\n                    <step>F</step>\n                    <octave>4</octave>\n                </pitch>\n                <duration>2</duration>\n                <voice>5</voice>\n                <type>eighth</type>\n                <accidental>natural</accidental>\n                <stem>up</stem>\n                <staff>2</staff>\n                <beam number=\"1\">begin</beam>\n                <notations>\n                    <dynamics>\n                        <mf />\n                    </dynamics>\n                    <technical>\n                        <string>1</string>\n                        <fret>1</fret>\n                    </technical>\n                </notations>\n            </note>\n            <note>\n                <pitch>\n                    <step>B</step>\n                    <octave>4</octave>\n                </pitch>\n                <duration>2</duration>\n                <voice>5</voice>\n                <type>eighth</type>\n                <stem>up</stem>\n                <staff>2</staff>\n                <beam number=\"1\">end</beam>\n                <notations>\n                    <dynamics>\n                        <p />\n                    </dynamics>\n                    <technical>\n                        <string>2</string>\n                        <fret>12</fret>\n                    </technical>\n                </notations>\n            </note>\n            <note>\n                <chord />\n                <pitch>\n                    <step>F</step>\n                    <octave>4</octave>\n                </pitch>\n                <duration>2</duration>\n                <voice>5</voice>\n                <type>eighth</type>\n                <stem>up</stem>\n                <staff>2</staff>\n                <beam number=\"1\">end</beam>\n                <notations>\n                    <dynamics>\n                        <p />\n                    </dynamics>\n                    <technical>\n                        <string>3</string>\n                        <fret>10</fret>\n                    </technical>\n                </notations>\n            </note>\n            <note>\n                <pitch>\n                    <step>G</step>\n                    <octave>4</octave>\n                </pitch>\n                <duration>1</duration>\n                <voice>5</voice>\n                <type>16th</type>\n                <stem>up</stem>\n                <staff>2</staff>\n                <beam number=\"1\">begin</beam>\n                <notations>\n                    <dynamics>\n                        <mf />\n                    </dynamics>\n                    <technical>\n                        <string>5</string>\n                        <fret>22</fret>\n                    </technical>\n                </notations>\n            </note>\n            <note>\n                <pitch>\n                    <step>A</step>\n                    <octave>4</octave>\n                </pitch>\n                <duration>2</duration>\n                <voice>5</voice>\n                <type>eighth</type>\n                <stem>up</stem>\n                <staff>2</staff>\n                <beam number=\"1\">continue</beam>\n                <notations>\n                    <dynamics>\n                        <mf />\n                    </dynamics>\n                    <technical>\n                        <string>4</string>\n                        <fret>19</fret>\n                    </technical>\n                </notations>\n            </note>\n            <note>\n                <pitch>\n                    <step>B</step>\n                    <octave>4</octave>\n                </pitch>\n                <duration>1</duration>\n                <voice>5</voice>\n                <type>16th</type>\n                <stem>up</stem>\n                <staff>2</staff>\n                <beam number=\"1\">end</beam>\n                <notations>\n                    <dynamics>\n                        <mf />\n                    </dynamics>\n                    <technical>\n                        <string>3</string>\n                        <fret>16</fret>\n                    </technical>\n                </notations>\n            </note>\n            <note>\n                <pitch>\n                    <step>E</step>\n                    <octave>5</octave>\n                </pitch>\n                <duration>4</duration>\n                <voice>5</voice>\n                <type>quarter</type>\n                <stem>down</stem>\n                <staff>2</staff>\n                <notations>\n                    <dynamics>\n                        <mf />\n                    </dynamics>\n                    <technical>\n                        <string>5</string>\n                        <fret>31</fret>\n                    </technical>\n                </notations>\n            </note>\n            <direction>\n                <direction-type>\n                    <wedge type=\"diminuendo\" />\n                </direction-type>\n            </direction>\n            <note>\n                <pitch>\n                    <step>A</step>\n                    <octave>4</octave>\n                </pitch>\n                <duration>2</duration>\n                <voice>5</voice>\n                <type>eighth</type>\n                <stem>up</stem>\n                <staff>2</staff>\n                <beam number=\"1\">begin</beam>\n                <notations>\n                    <dynamics>\n                        <mf />\n                    </dynamics>\n                    <technical>\n                        <string>3</string>\n                        <fret>14</fret>\n                    </technical>\n                </notations>\n            </note>\n            <direction>\n                <direction-type>\n                    <wedge type=\"diminuendo\" />\n                </direction-type>\n            </direction>\n            <note>\n                <chord />\n                <pitch>\n                    <step>G</step>\n                    <octave>4</octave>\n                </pitch>\n                <duration>2</duration>\n                <voice>5</voice>\n                <type>eighth</type>\n                <stem>up</stem>\n                <staff>2</staff>\n                <beam number=\"1\">begin</beam>\n                <notations>\n                    <dynamics>\n                        <mf />\n                    </dynamics>\n                    <technical>\n                        <string>1</string>\n                        <fret>3</fret>\n                    </technical>\n                </notations>\n            </note>\n            <direction>\n                <direction-type>\n                    <wedge type=\"stop\" />\n                </direction-type>\n            </direction>\n            <note>\n                <pitch>\n                    <step>C</step>\n                    <octave>5</octave>\n                </pitch>\n                <duration>2</duration>\n                <tie type=\"start\" />\n                <voice>5</voice>\n                <type>eighth</type>\n                <stem>up</stem>\n                <staff>2</staff>\n                <beam number=\"1\">end</beam>\n                <notations>\n                    <dynamics>\n                        <mf />\n                    </dynamics>\n                    <technical>\n                        <string>5</string>\n                        <fret>27</fret>\n                    </technical>\n                    <tied type=\"start\" />\n                </notations>\n            </note>\n            <backup>\n                <duration>20</duration>\n            </backup>\n            <note>\n                <rest />\n                <duration>8</duration>\n                <voice>9</voice>\n                <type>half</type>\n                <staff>3</staff>\n            </note>\n            <note>\n                <pitch>\n                    <step>D</step>\n                    <octave>3</octave>\n                </pitch>\n                <duration>8</duration>\n                <voice>9</voice>\n                <type>half</type>\n                <stem>up</stem>\n                <notehead>normal</notehead>\n                <staff>3</staff>\n                <notations>\n                    <dynamics>\n                        <mf />\n                    </dynamics>\n                    <technical>\n                        <string>5</string>\n                        <fret>27</fret>\n                    </technical>\n                </notations>\n            </note>\n            <backup>\n                <duration>16</duration>\n            </backup>\n            <note>\n                <rest />\n                <duration>8</duration>\n                <voice>13</voice>\n                <type>half</type>\n                <staff>4</staff>\n            </note>\n            <note>\n                <pitch>\n                    <step>D</step>\n                    <octave>3</octave>\n                </pitch>\n                <duration>8</duration>\n                <voice>13</voice>\n                <type>half</type>\n                <stem>up</stem>\n                <staff>4</staff>\n                <notations>\n                    <dynamics>\n                        <mf />\n                    </dynamics>\n                    <technical>\n                        <string>5</string>\n                        <fret>27</fret>\n                    </technical>\n                </notations>\n            </note>\n        </measure>\n        <measure number=\"2\">\n            <attributes>\n                <divisions>1</divisions>\n            </attributes>\n            <note>\n                <pitch>\n                    <step>C</step>\n                    <octave>5</octave>\n                </pitch>\n                <duration>2</duration>\n                <tie type=\"stop\" />\n                <voice>1</voice>\n                <type>half</type>\n                <stem>down</stem>\n                <notehead>normal</notehead>\n                <staff>1</staff>\n                <notations>\n                    <technical>\n                        <string>5</string>\n                        <fret>27</fret>\n                    </technical>\n                    <tied type=\"stop\" />\n                </notations>\n            </note>\n            <backup>\n                <duration>2</duration>\n            </backup>\n            <note>\n                <pitch>\n                    <step>C</step>\n                    <octave>5</octave>\n                </pitch>\n                <duration>2</duration>\n                <tie type=\"stop\" />\n                <voice>5</voice>\n                <type>half</type>\n                <stem>down</stem>\n                <staff>2</staff>\n                <notations>\n                    <technical>\n                        <string>5</string>\n                        <fret>27</fret>\n                    </technical>\n                    <tied type=\"stop\" />\n                </notations>\n            </note>\n            <backup>\n                <duration>2</duration>\n            </backup>\n            <note>\n                <pitch>\n                    <step>B</step>\n                    <octave>2</octave>\n                </pitch>\n                <duration>4</duration>\n                <voice>9</voice>\n                <type>whole</type>\n                <stem>up</stem>\n                <notehead>normal</notehead>\n                <staff>3</staff>\n                <notations>\n                    <technical>\n                        <string>4</string>\n                        <fret>19</fret>\n                    </technical>\n                </notations>\n            </note>\n            <backup>\n                <duration>4</duration>\n            </backup>\n            <note>\n                <pitch>\n                    <step>B</step>\n                    <octave>2</octave>\n                </pitch>\n                <duration>4</duration>\n                <voice>13</voice>\n                <type>whole</type>\n                <stem>up</stem>\n                <staff>4</staff>\n                <notations>\n                    <technical>\n                        <string>4</string>\n                        <fret>19</fret>\n                    </technical>\n                </notations>\n            </note>\n        </measure>\n    </part>\n</score-partwise>\n";
/* xml = `
<qwe>
    <as id="1" class= "xx">
        ttt
    </as>
    <ds/>
    <zz></zz>
</qwe>`; */
var root = Parser.parseMusicXml(xml);
var spn = root.getChildNodesByName('score-partwise')[0];
// start
console.time('-------------执行时间------------');
console.log('~~~ test MeasureNode ~~~');
var m = spn.getChildNodesByName('part')[0].getChildNodesByName('measure');
console.log(m);
console.log(m[0].Number());
console.log(m[0].Attributes());
console.log(m[0].displayEntities());
console.log('~~~ test NoteNode ~~~');
var n1 = m[0].getChildNodesByName('note')[0];
console.log(n1.Duration());
console.log(n1.PitchStep());
console.log(n1.PitchOctave());
console.log(n1.PitchAlter());
console.log(n1.NotationsDynamics());
console.log(n1.NotationsTechFret());
console.log(n1.NotationsTechString());
MxNodeRender.render(root);
console.log(root.getFullText());
console.log(root.toTreeString('   ', '\n'));
// document.write(root.toTreeString('&emsp;&emsp;', '<br>'));
Utils.loadImgs(Constant.ImgSrc, function (imgObj) {
    var canvas = document.getElementById('canvas');
    var quill = new Quill(canvas.getContext('2d'), imgObj);
    var config = new Config(canvas);
    var render = new Render(root, quill, config);
    render.main();
    // quill.drawClef(50, 40, 'G');
    // quill.drawPoint(50, 40, 2, 'red');
    console.timeEnd('-------------执行时间------------');
});
// end
//# sourceMappingURL=main.js.map